<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Muskan ‚ù§Ô∏è</title>

<style>
body {
    background: linear-gradient(to bottom, #000000, #1a001a);
    color: white;
    font-family: 'Segoe UI', sans-serif;
    text-align: center;
    padding: 20px;
}

h1 {
    color: #ff4da6;
}

.puzzle {
    margin: 40px 0;
}

input {
    padding: 10px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    text-align: center;
}

button {
    padding: 12px 25px;
    border-radius: 30px;
    border: none;
    background: #ff4da6;
    color: white;
    cursor: pointer;
    margin-top: 10px;
    font-size: 18px;
    transition: 0.3s ease;
}

button:hover {
    background: #ff1a8c;
}

.locked-word {
    font-size: 22px;
    margin-top: 10px;
    color: #ff99cc;
}

#finalBox {
    display: none;
    margin-top: 40px;
}

#proposal {
    display: none;
    margin-top: 40px;
    font-size: 32px;
    color: #ff66b2;
}

/* Button alignment */
.buttonContainer {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 30px;
}

.yesBtn {
    font-size: 20px;
}

.noBtn {
    font-size: 18px;
}
/* Floating Hearts Background */
.heart {
    position: fixed;
    bottom: -20px;
    font-size: 20px;
    color: #ff4da6;
    animation: floatUp 6s linear infinite;
    opacity: 0.7;
    z-index: 0;
}

@keyframes floatUp {
    0% {
        transform: translateY(0) scale(1);
        opacity: 0.8;
    }
    100% {
        transform: translateY(-110vh) scale(1.5);
        opacity: 0;
    }
}

/* Make sure content stays above hearts */
body > * {
    position: relative;
    z-index: 1;
}

</style>
</head>
<body>

<!-- Background Music -->
<audio id="bgMusic" loop>
    <source src="beginning-middle-end.mp3" type="audio/mpeg">
</audio>


<h1>Hey Muskan ‚ù§Ô∏è</h1>
<p>Solve these little pieces of our story...</p>

<div class="puzzle">
<h3>Puzzle 1</h3>
<p>
The place where two strangers met,<br>
And time quietly paused for a bet.<br>
Coffee grew cold, but hearts grew warm.<br>
Where was it that love took form?
</p>
<input type="text" id="p1">
<button onclick="checkP1()">Unlock</button>
<div class="locked-word" id="word1"></div>
</div>

<div class="puzzle">
<h3>Puzzle 2</h3>
<p>What is the name you call me when you‚Äôre soft and sleepy?</p>
<input type="text" id="p2">
<button onclick="checkP2()">Unlock</button>
<div class="locked-word" id="word2"></div>
</div>

<div class="puzzle">
<h3>Puzzle 3</h3>
<p>Decode this (Shift each letter back by one):<br><b>NBSSZ</b></p>
<input type="text" id="p3">
<button onclick="checkP3()">Unlock</button>
<div class="locked-word" id="word3"></div>
</div>

<div class="puzzle">
<h3>Puzzle 4</h3>
<p>13 - 5 (A=1, B=2...)</p>
<input type="text" id="p4">
<button onclick="checkP4()">Unlock</button>
<div class="locked-word" id="word4"></div>
</div>

<div id="finalBox">
<h2>Now enter all unlocked words in order:</h2>
<input type="text" id="finalAnswer" placeholder="Type the full sentence">
<br>
<button onclick="checkFinal()">Reveal</button>
</div>

<div id="proposal">
    <p>Will You Marry Me?</p>

    <div class="buttonContainer">
        <button class="yesBtn"
        onclick="celebrateYes()">
        Yes üíñ
        </button>

        <button class="noBtn" id="noBtn">
        Let me think üíî
        </button>
    </div>
</div>

<script>
// Enable music after first interaction
document.addEventListener("click", function() {
    const music = document.getElementById("bgMusic");
    if (music.paused) {
        music.play().catch(() => {});
    }
}, { once: true });

let solved = {p1:false,p2:false,p3:false,p4:false};

function checkP1(){
    if(!solved.p1 && document.getElementById("p1").value.toLowerCase().trim() === "social"){
        document.getElementById("word1").innerHTML = "WILL";
        solved.p1 = true;
        showFinal();
    }
}

function checkP2(){
    if(!solved.p2 && document.getElementById("p2").value.toLowerCase().trim() === "booboo"){
        document.getElementById("word2").innerHTML = "YOU";
        solved.p2 = true;
        showFinal();
    }
}

function checkP3(){
    if(!solved.p3 && document.getElementById("p3").value.toLowerCase().trim() === "marry"){
        document.getElementById("word3").innerHTML = "MARRY";
        solved.p3 = true;
        showFinal();
    }
}

function checkP4(){
    if(!solved.p4 && document.getElementById("p4").value.toLowerCase().trim() === "me"){
        document.getElementById("word4").innerHTML = "ME ?";
        solved.p4 = true;
        showFinal();
    }
}

function showFinal(){
    if(solved.p1 && solved.p2 && solved.p3 && solved.p4){
        document.getElementById("finalBox").style.display = "block";
    }
}

function checkFinal(){
    let answer = document.getElementById("finalAnswer").value.toLowerCase().trim();
    if(answer === "will you marry me"){
        document.getElementById("proposal").style.display = "block";
    } else {
        alert("Look carefully at the unlocked words ‚ù§Ô∏è");
    }
}

/* SHRINK BUTTON LOGIC */
let noBtn = document.getElementById("noBtn");
let shrinkCount = 0;

noBtn.addEventListener("click", function(){

    shrinkCount++;

    let scale = 1 - (shrinkCount * 0.2);

    if(scale <= 0.2){
        noBtn.style.display = "none";
    } else {
        noBtn.style.transform = "scale(" + scale + ")";
    }

});
/* Create Floating Hearts */
function createHeart() {
    const heart = document.createElement("div");
    heart.classList.add("heart");
    heart.innerHTML = "‚ù§";

    heart.style.left = Math.random() * 100 + "vw";
    heart.style.fontSize = (Math.random() * 20 + 15) + "px";
    heart.style.animationDuration = (Math.random() * 3 + 4) + "s";

    document.body.appendChild(heart);

    setTimeout(() => {
        heart.remove();
    }, 7000);
}

setInterval(createHeart, 500);

function celebrateYes() {

    // First Confetti Burst
    confetti({
        particleCount: 150,
        spread: 90,
        origin: { y: 0.6 }
    });

    // Side Bursts
    setTimeout(() => {
        confetti({
            particleCount: 100,
            angle: 60,
            spread: 70,
            origin: { x: 0 }
        });
        confetti({
            particleCount: 100,
            angle: 120,
            spread: 70,
            origin: { x: 1 }
        });
    }, 300);

    // Show alert after animation starts
    setTimeout(() => {
        alert("You just made me the happiest person alive ‚ù§Ô∏è");
    }, 600);
}



</script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>
</html>
